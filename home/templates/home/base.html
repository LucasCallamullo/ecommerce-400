<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, 
    maximum-scale=1.0, user-scalable=no">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    interactive-widget=resizes-content -->

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Fuerza el light mode mas alla del SO -->
    <meta name="color-scheme" content="light">
    
    {% load static %}

    <!-- Preconnect and Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Page icons for different devices -->
    <link rel="shortcut icon" href="{% static 'ico/favicon-16x16.png' %}" type="image/x-icon">
    <link rel="icon" href="{% static 'ico/favicon-32x32.png' %}" sizes="32x32" type="image/png">
    <link rel="apple-touch-icon" href="{% static 'ico/apple-touch-icon.png' %}">
    <link rel="icon" sizes="192x192" href="{% static 'ico/android-chrome-192x192.png' %}">
    <link rel="icon" sizes="512x512" href="{% static 'ico/android-chrome-512x512.png' %}">
    <link rel="manifest" href="{% static 'ico/site.webmanifest' %}">
    
    <!-- REMIXICONS search icons in: https://remixicon.com -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.min.css">

    <!-- Optional: Your custom styles -->
    <link href="{% static 'css/basic.css' %}" rel="stylesheet"> 
    <link href="{% static 'css/buttons.css' %}" rel="stylesheet">
    <link href="{% static 'css/containers.css' %}" rel="stylesheet">
    <link href="{% static 'css/cont-images.css' %}" rel="stylesheet">
    <link href="{% static 'css/effects.css' %}" rel="stylesheet">
    <link href="{% static 'css/text-utils.css' %}" rel="stylesheet">
    <link href="{% static 'css/gap-margin-utils.css' %}" rel="stylesheet">
    
    <link href="{% static 'css/alerts.css' %}" rel="stylesheet">
    <link href="{% static 'css/overlay-modal.css' %}" rel="stylesheet">
    <link href="{% static 'css/spinner.css' %}" rel="stylesheet">
    <link href="{% static 'css/backToTopBtn.css' %}" rel="stylesheet">
    <link href="{% static 'css/wspBtn.css' %}" rel="stylesheet">

    
    <link href="{% static 'home/css/footer.css' %}" rel="stylesheet"> 

    <link href="{% static 'home/css/navbar.css' %}" rel="stylesheet"> 

    <link href="{% static 'users/css/widget_login.css' %}" rel="stylesheet"> 
    <link href="{% static 'cart/css/widget_cart.css' %}" rel="stylesheet"> 
    
    <!-- For More CSS Modules -->
    {% block extra_head %}
        <title> Some title to change </title>
        
        <!-- Load page-specific CSS or meta tags here -->
    {% endblock %}
</head>

<!-- =========== START BODY ================== -->
<body>
    <!-- HEADER -->
    <header class="bg-color">
        <!--  NAV MOBILE  -->
        {% include 'home/nav_mobile.html' %}

        <!-- NAV DESKTOP -->
        {% include 'home/nav_desktop.html' %}
    </header>

    <!--     Main content in every html child		 -->
    <main>
        <!-- To place banners without the page limit -->
        {% block top_banner_image %}
        
        {% endblock top_banner_image %}

        <!-- we limit the page container to the main content. -->
        <div class="cont-page"> 
            <!--  	
            <button class="btn btn-main mb-2" onclick="forceReload()">Recargar sin caché</button>
            -->
            {% block main_content %}
        
            {% endblock main_content %}
        </div>

        <!-- Contenedor de Alertas -->
        <div class="cont__alerts" id="cont__alerts" data-state="closed">
            <!-- efecto de span de alertas ( ver static / js / alerts.js )-->
        </div>
    </main>
    
    <!-- To place banners without the page limit -->
    {% block bot_banner_image %}
        
    {% endblock bot_banner_image %}

    <!-- FOOTER -->   
    <hr> 
    <footer class="cont-page">
        <!--  Footer -->
        {% include 'home/footer.html' %}
    </footer>
    
    <!--  BUTTON BACK TO TOP - ONLY DESKTOP-->
    <div class="d-desktop-block relative">
        <button id="backToTop" class="back-to-top">
            <i class="ri-arrow-up-line font-xl"></i>
            <svg class="progress" width="40" height="40">
                <circle cx="20" cy="20" r="18" />
            </svg>
        </button>
    </div>
    

    <!-- Botón flotante -->
    <div class="btn floating-wsp-btn" id="floating-wsp-btn">
        <i class="ri-whatsapp-line font-xxl"></i>
    </div>

    <!-- Menú flotante -->
    <div class="floating-wsp-menu" id="floating-wsp-menu">
        <div class="d-flex gap-2 cont-wsp-menu__green">
            <i class="ri-whatsapp-line font-xxxl"></i>
            <div class="d-flex-col gap-1">
                <b class="text-start font-md">Hola!</b>
                <p class="text-start font-sm">¿En que podemos ayudarte?</p>
            </div>
        </div>

        <div class="d-flex-col gap-2 cont-wsp-menu__white">
            <p class="text-start font-sm gray">Nuestro equipo responde en pocos minutos.</p>
            <a href="#" target="_blank" class="d-flex gap-2 wsp-menu__btn" id="wsp-link" data-wsp="{{store.wsp_number}}">
                
                <img src="https://img.freepik.com/vector-gratis/plantilla-diseno-logotipo-gato_23-2150414628.jpg" alt="">

                <div class="d-flex-col gap-1">
                    <b class="text-start font-md">{{store.name}}</b>
                    <div class="d-flex gap-1">
                        <i class="ri-whatsapp-line font-xxl"></i>
                        <span class="text-start font-sm gray">{{store.cellphone}}</span>
                    </div>
                    <span class="font-sm bold-orange">10hs a 18:30hs.</span>
                </div>
            </a>
        </div>
    </div>

    <!-- Global Variables To Use in .js	 -->
    <script>
        window.BASE_URLS = {
            // Generic endpoints from cart and cart widget update .replace('/0/', '/')
            addToCart: "{% url 'cart_add_product' %}",
            substractToCart: "{% url 'cart_substract_product' %}",
            deleteToCart: "{% url 'cart_remove_product' %}",

            // order/urls
            resumeOrder: "{% url 'resume-order' %}",

            // users/urls
            profileUser: "{% url 'profile_user' %}"
        };

        // save a dict in js to dont compare innecesary
        const CART_DATA = {
            {% for key, value in carrito.items %}
                "{{ value.id  }}": {{ value.qty }},
            {% endfor %}
        };

        const AUTH_STATUS = '{{ user.is_authenticated|yesno:"true,false" }}' === 'true';

    </script>

    <script src="{% static 'js/base.js' %}"></script>
    
    <!-- 	js utils my mini framework	 -->
    <script src="{% static 'js/alerts.js' %}"></script>
    <script src="{% static 'js/forms.js' %}"></script>
    <script src="{% static 'js/overlay-modal.js' %}"></script>
    <script src="{% static 'js/outside-click.js' %}"></script>
    <script src="{% static 'js/utils.js' %}"></script>
    <script src="{% static 'js/backToTopBtn.js' %}"></script>
    <script src="{% static 'js/wspBtn.js' %}"></script>

    <!-- Navbar js -->
    <script src="{% static 'home/js/navbar.js' %}"></script>

    <!-- JavaScript for Carrito Widget -->
    <script src="{% static 'cart/js/widget_cart.js' %}"></script>
    
    <!-- JavaScript for users Widget -->
    <script src="{% static 'users/js/widget_login.js' %}"></script>
    
    <!-- Optional: Your custom scripts -->
    {% block extra_scripts %}
        <!-- You load your own .js files for each template/view, this is useful since they are 
        loaded later of the base scripts leaving their functions as global -->
    {% endblock extra_scripts %}
</body>
</html>
