<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, 
    maximum-scale=1.0, user-scalable=no">
    {# interactive-widget=resizes-content #}

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    {# Fuerza el light mode mas alla del SO #}
    <meta name="color-scheme" content="light">
    
    {% load static compress %}

    {# para precargar la fuente y remix icons #}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.min.css">

    {# Page icons for different devices #}
    <link rel="shortcut icon" href="{% static 'ico/favicon-16x16.png' %}" type="image/x-icon">
    <link rel="icon" href="{% static 'ico/favicon-32x32.png' %}" sizes="32x32" type="image/png">
    <link rel="apple-touch-icon" href="{% static 'ico/apple-touch-icon.png' %}">
    <link rel="icon" sizes="192x192" href="{% static 'ico/android-chrome-192x192.png' %}">
    <link rel="icon" sizes="512x512" href="{% static 'ico/android-chrome-512x512.png' %}">
    <link rel="manifest" href="{% static 'ico/site.webmanifest' %}">
    
    {% compress css %}
        <link href="{% static 'css/basic.css' %}" rel="stylesheet"> 
        <link href="{% static 'css/buttons.css' %}" rel="stylesheet">
        <link href="{% static 'css/containers.css' %}" rel="stylesheet">
        <link href="{% static 'css/cont-images.css' %}" rel="stylesheet">
        <link href="{% static 'css/effects.css' %}" rel="stylesheet">
        <link href="{% static 'css/text-utils.css' %}" rel="stylesheet">
        <link href="{% static 'css/gap-margin-utils.css' %}" rel="stylesheet">
        
        <link href="{% static 'css/alerts.css' %}" rel="stylesheet">
        <link href="{% static 'css/overlay-modal.css' %}" rel="stylesheet">
        <link href="{% static 'css/spinner.css' %}" rel="stylesheet">
        <link href="{% static 'css/backToTopBtn.css' %}" rel="stylesheet">
        <link href="{% static 'css/wspBtn.css' %}" rel="stylesheet">

        <link href="{% static 'home/css/footer.css' %}" rel="stylesheet"> 
        <link href="{% static 'home/css/navbar.css' %}" rel="stylesheet"> 

        <link href="{% static 'users/css/widget_login.css' %}" rel="stylesheet"> 
        <link href="{% static 'cart/css/widget_cart.css' %}" rel="stylesheet"> 
    {% endcompress %}

    {# Aparece en snippets de Google #}
    <meta name="description" content="Descripción clara (150-160 chars)"> 

    {% block extra_head %}
        {# For More CSS Modules - Load page-specific CSS or meta tags here #}
        <title> Some title to change </title>
    {% endblock %}
</head>


<body>
    <header class="bg-color">
        {% include 'home/nav_mobile.html' %}

        {% include 'home/nav_desktop.html' %}

        <div class="cont-page relative">
            {% include "cart/widget_cart.html" %}
        </div>
    </header>

    <main>
        {# To place banners without the page limit #}
        {% block top_banner_image %}
        
        {% endblock top_banner_image %}

        {# we limit the page container to the main content. #}
        <div class="cont-page"> 
            {# button class="btn btn-main mb-2" onclick="forceReload()">Recargar sin caché</button> #}
            {% block main_content %}
        
            {% endblock main_content %}
        </div>

        <div class="cont__alerts" id="cont__alerts" data-state="closed">
            {# efecto de span de alertas ( ver static / js / alerts.js ) #}
        </div>
    </main>
    
    {# To place banners without the page limit #}
    {% block bot_banner_image %}
        
    {% endblock bot_banner_image %}


    <footer class="cont-page border-top-prim">
        {% include 'home/footer.html' %}
    </footer>
    
    {# BUTTON BACK TO TOP - ONLY DESKTOP #}
    <div class="d-desktop-block relative">
        <button id="backToTop" class="back-to-top">
            <i class="ri-arrow-up-line font-xl"></i>
            <svg class="progress" width="40" height="40">
                <circle cx="20" cy="20" r="18" />
            </svg>
        </button>
    </div>
    
    {# Button WSP flotante #}
    <button class="btn floating-wsp-btn" id="floating-wsp-btn">
        <i class="ri-whatsapp-line font-xxl"></i>
    </button>

    <div class="floating-wsp-menu" id="floating-wsp-menu">
        <div class="d-flex gap-2 cont-wsp-menu__green">
            <i class="ri-whatsapp-line font-xxxl"></i>
            <span class="d-flex-col gap-1 text-start font-sm">
                <b class="font-md">Hola!</b>
                ¿En que podemos ayudarte?
            </span>
        </div>

        <div class="d-flex-col gap-2 cont-wsp-menu__white text-start font-sm text-secondary">
            Nuestro equipo responde en pocos minutos.

            <a href="#" target="_blank" class="d-flex gap-2 wsp-menu__btn" id="wsp-link" data-wsp="{{store.wsp_number}}">
                <img src="https://img.freepik.com/vector-gratis/plantilla-diseno-logotipo-gato_23-2150414628.jpg" alt="">

                <div class="d-flex-col gap-1 text-start font-sm">
                    <b class="font-md text-primary">{{store.name}}</b>

                    <span class="d-flex gap-1 text-secondary">
                        <i class="ri-whatsapp-line font-xxl"></i>
                        {{store.cellphone}}
                    </span>

                    <b class="font-sm bold-orange">10hs a 18:30hs.</b>
                </div>
            </a>
        </div>
    </div>
    
    {% comment %}
        {# cart/urls_api #}
        cartActions: "{% url 'cart-api' 0 %}".replace('/0/', '/{product_id}/'),

        {# order/urls #}
        resumeOrder: "{% url 'resume-order' %}",

        {# users/urls #}
        profileUser: "{% url 'profile_user' %}"

        {# products/urls #}
        productDetail: "{% url 'product_detail' id=0 slug='__SLUG__' %}",
    {% endcomment %}

    <script>
        window.BASE_URLS = {
            cartActions: "{% url 'cart-api' 0 %}".replace('/0/', '/{product_id}/'),
            productDetail: "{% url 'product_detail' id=0 slug='__SLUG__' %}",
            resumeOrder: "{% url 'resume-order' %}",
            profileUser: "{% url 'profile_user' %}",
        };

        window.CART_DATA = JSON.parse('{{ cart_data|escapejs }}');

        const AUTH_STATUS = '{{ user.is_authenticated|yesno:"true,false" }}' === 'true';
        const USER_ROLE = "{{ user.role }}";
    </script>


    {% compress js %}
        <script src="{% static 'js/base.js' %}"></script>
        <script src="{% static 'js/alerts.js' %}"></script>
        <script src="{% static 'js/forms.js' %}"></script>
        <script src="{% static 'js/overlay-modal.js' %}"></script>
        <script src="{% static 'js/outside-click.js' %}"></script>
        <script src="{% static 'js/utils.js' %}"></script>
        <script src="{% static 'js/backToTopBtn.js' %}"></script>
        <script src="{% static 'js/wspBtn.js' %}"></script>

        <script src="{% static 'home/js/navbar.js' %}"></script>

        <script src="{% static 'cart/js/components/widget_cart.js' %}"></script>
        <script src="{% static 'cart/js/widget_cart.js' %}"></script>
        
        <script src="{% static 'users/js/widget_login.js' %}"></script>
    {% endcompress %}
    
    {% block extra_scripts %}
        {# You load your own .js files for each template/view, this is useful since they are 
        loaded later of the base scripts leaving their functions as global #}
    {% endblock extra_scripts %}


    <script>
        document.addEventListener('DOMContentLoaded', () => { analizarHTML(); });
    </script>
</body>
</html>
